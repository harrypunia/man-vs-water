function bulletPhysics(e,t){for(var l=0;l<bullets.length;l++){for(var i=0;i<e.length;i++)e[i].position.x-bullets[l].position.x<=1.5+t&&e[i].position.x-bullets[l].position.x>=-(1.5+t)&&e[i].position.z-bullets[l].position.z<=1.5+t&&e[i].position.z-bullets[l].position.z>=-(1.5+t)&&bullets[l].position.y>0&&(bullets[l].position.set(0,-5,0),bullets[l].alive=!1);if((bullets[l].position.x<-arenaSize/2||bullets[l].position.x>arenaSize/2||bullets[l].position.z<-arenaSize/2||bullets[l].position.z>arenaSize/2)&&(bullets[l].position.set(0,-5,0),bullets[l].alive=!1),void 0!=bullets[l])if(1==bullets[l].alive)bullets[l].position.add(bullets[l].velocity);else if(0==bullets[l].alive)continue}}var Gun=function(e,t,l,i){var s=new THREE.SphereGeometry(e,10,10),o=new THREE.MeshBasicMaterial({color:16777215}),n=new THREE.Mesh(s,o),a=t-1;this.totalBullets=i,this.reloadStatus=!1,this.bulletHeight=1;var u=this;this.init=function(){bulletCountDisplay.innerHTML=a+1+" / "+i;for(var e=0;e<t;e++)bullets[e]=n.clone(),bullets[e].position.set(0,-5,0),scene.add(bullets[e])},this.shoot=function(e,t){a>=0?(this.gunSound(t),bullets[a].position.set(player.mesh.position.x,u.bulletHeight,player.mesh.position.z),bullets[a].velocity=new THREE.Vector3(-Math.sin(e),0,-Math.cos(e)),bullets[a].velocity.x*=l,bullets[a].velocity.z*=l,bullets[a].alive=!0,a--,bulletCountDisplay.innerHTML=a+1+" / "+i):(emptyGun.play(),bulletCountDisplay.classList.add("shake"),setTimeout(function(){bulletCountDisplay.classList.remove("shake")},300))},this.gunSound=function(e){if("Speedy"==playerType){var t=gunSupressor.cloneNode();t.volume=.05,t.play()}else"Assassin"==playerType?(sniper.playbackRate=2,sniper.play()):(shotgun.playbackRate=120/e,shotgun.play())},this.allowReload=function(){return a!=t-1},this.reload=function(e){i>0?(u.reloadStatus=!0,"Speedy"==playerType&&(reloadPistol.playbackRate=1e3/e*2,reloadPistol.play()),bulletCountAnimation.style.animation="reload "+e/1e3+"s linear",setTimeout(function(){bulletCountAnimation.style.animation="",t-a<=i?(i-=t-a-1,a=t-1):t-a>i&&(a+=i,i=0),bullets.reverse(),bulletCountDisplay.innerHTML=a+1+" / "+i,u.reloadStatus=!1},e)):console.log("you dont have enough ammo")}};