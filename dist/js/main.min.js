function init(){canvas=document.getElementById("container"),scene=new THREE.Scene,mapCamera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,1e3),(camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,1e3)).position.z=0,camera.rotation.order="YXZ",(renderer=new THREE.WebGLRenderer({antialias:!0})).setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)},!1),document.body.appendChild(container)}function animate(){controls&&controls.update(),game.update(),render(),requestAnimationFrame(animate)}function render(){1==dimBack&&dimLight(),renderer.setViewport(0,0,window.innerWidth,window.innerHeight),renderer.render(scene,camera),renderer.clearDepth(),renderer.autoClear=!1,fullLight(),renderer.setViewport(mapView.x,mapView.y,mapView.width,mapView.height),mapCamera.aspect=mapView.width/mapView.height,mapCamera.updateProjectionMatrix(),mapCamera.position.set(mapPos.x,mapPos.y,mapPos.z),renderer.render(scene,mapCamera)}function initThreeJs(){init(),game.init(),mapPos.x=player.mesh.position.x,mapPos.z=player.mesh.position.z,animate()}function dimLight(){ambLight.intensity=.3,sun.intensity=.3}function fullLight(){ambLight.intensity=1,sun.intensity=1}var canvas,scene,camera,mapCamera,renderer,dimBack,controls,mapSize,game=new Game,mapPos={x:0,y:70,z:0},mapView={width:200,height:200,x:window.innerWidth-220,y:20};